<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_precipitate_dissolution">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div style="background-color: white">
        <center>
        <img src="../images/logo.png" />
        </center>
      </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="inverse-problems">Inverse problems</h1>

<h2 id="precipitate-dissolution-model-of-an-aluminium-alloy">Precipitate dissolution model of an aluminium alloy</h2>
<pre class="highlight cpp"><code><span class="cp">#include &lt;iostream&gt;
#include &lt;time.h&gt;
</span>
<span class="cp">#include "../../source/opennn.h"
</span>
<span class="cp">#include "precipitate_dissolution.h"
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">OpenNN</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PrecipitateDissolution</span> <span class="n">precipitate_dissolution</span><span class="p">;</span>

    <span class="n">precipitate_dissolution</span><span class="p">.</span><span class="n">set_reference_temperature</span><span class="p">(</span><span class="mf">573.16</span><span class="p">);</span> <span class="c1">// K
</span>    <span class="n">precipitate_dissolution</span><span class="p">.</span><span class="n">set_reference_time</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="c1">// s
</span>
    <span class="n">precipitate_dissolution</span><span class="p">.</span><span class="n">set_minimum_Vickers_hardness</span><span class="p">(</span><span class="mf">66.9124</span><span class="p">);</span>
    <span class="n">precipitate_dissolution</span><span class="p">.</span><span class="n">set_maximum_Vickers_hardness</span><span class="p">(</span><span class="mf">151.9350</span><span class="p">);</span>

    <span class="n">DataSet</span> <span class="n">data_set</span><span class="p">;</span>

    <span class="n">data_set</span><span class="p">.</span><span class="n">load_data</span><span class="p">(</span><span class="s">"../data/precipitate_dissolution/DataAA-2014-T6.dat"</span><span class="p">);</span>

    <span class="n">VariablesInformation</span><span class="o">*</span> <span class="n">variables_information_pointer</span> <span class="o">=</span> <span class="n">data_set</span><span class="p">.</span><span class="n">get_variables_information_pointer</span><span class="p">();</span>

    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set_name</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"temperature"</span><span class="p">);</span>
    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set_name</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">"time"</span><span class="p">);</span>
    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set_name</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">"vickers_hardness"</span><span class="p">);</span>

    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set_units</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"celsius"</span><span class="p">);</span>
    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set_units</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">"s"</span><span class="p">);</span>
    <span class="n">variables_information_pointer</span><span class="o">-&gt;</span><span class="n">set_units</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">"none"</span><span class="p">);</span>

    <span class="k">const</span> <span class="n">Matrix</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">input_data</span> <span class="o">=</span> <span class="n">data_set</span><span class="p">.</span><span class="n">arrange_input_data</span><span class="p">();</span>

    <span class="n">NeuralNetwork</span> <span class="n">neural_network</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">neural_network</span><span class="p">.</span><span class="n">construct_inputs_outputs_information</span><span class="p">();</span>

    <span class="n">InputsOutputsInformation</span><span class="o">*</span> <span class="n">inputs_outputs_information_pointer</span> <span class="o">=</span> <span class="n">neural_network</span><span class="p">.</span><span class="n">get_inputs_outputs_information_pointer</span><span class="p">();</span>

    <span class="n">inputs_outputs_information_pointer</span><span class="o">-&gt;</span><span class="n">set_input_name</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"log(t/t*)"</span><span class="p">);</span>
    <span class="n">inputs_outputs_information_pointer</span><span class="o">-&gt;</span><span class="n">set_output_name</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"1-f/f0"</span><span class="p">);</span>

    <span class="n">inputs_outputs_information_pointer</span><span class="o">-&gt;</span><span class="n">set_input_units</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"none"</span><span class="p">);</span>
    <span class="n">inputs_outputs_information_pointer</span><span class="o">-&gt;</span><span class="n">set_output_units</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"none"</span><span class="p">);</span>

    <span class="n">MultilayerPerceptron</span><span class="o">*</span> <span class="n">multilayer_perceptron_pointer</span> <span class="o">=</span> <span class="n">neural_network</span><span class="p">.</span><span class="n">get_multilayer_perceptron_pointer</span><span class="p">();</span>

    <span class="n">multilayer_perceptron_pointer</span><span class="o">-&gt;</span><span class="n">initialize_parameters_normal</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0e-2</span><span class="p">);</span>

    <span class="n">neural_network</span><span class="p">.</span><span class="n">construct_scaling_layer</span><span class="p">();</span>

    <span class="n">ScalingLayer</span><span class="o">*</span> <span class="n">scaling_layer_pointer</span> <span class="o">=</span> <span class="n">neural_network</span><span class="p">.</span><span class="n">get_scaling_layer_pointer</span><span class="p">();</span>

    <span class="n">scaling_layer_pointer</span><span class="o">-&gt;</span><span class="n">set_minimum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">6.0</span><span class="p">);</span>
    <span class="n">scaling_layer_pointer</span><span class="o">-&gt;</span><span class="n">set_maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">);</span>

    <span class="n">neural_network</span><span class="p">.</span><span class="n">construct_unscaling_layer</span><span class="p">();</span>

    <span class="n">UnscalingLayer</span><span class="o">*</span> <span class="n">unscaling_layer_pointer</span> <span class="o">=</span> <span class="n">neural_network</span><span class="p">.</span><span class="n">get_unscaling_layer_pointer</span><span class="p">();</span>

    <span class="n">unscaling_layer_pointer</span><span class="o">-&gt;</span><span class="n">set_minimum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
    <span class="n">unscaling_layer_pointer</span><span class="o">-&gt;</span><span class="n">set_maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>

    <span class="n">neural_network</span><span class="p">.</span><span class="n">construct_bounding_layer</span><span class="p">();</span>

    <span class="n">BoundingLayer</span><span class="o">*</span> <span class="n">bounding_layer_pointer</span> <span class="o">=</span> <span class="n">neural_network</span><span class="p">.</span><span class="n">get_bounding_layer_pointer</span><span class="p">();</span>

    <span class="n">bounding_layer_pointer</span><span class="o">-&gt;</span><span class="n">set_lower_bound</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
    <span class="n">bounding_layer_pointer</span><span class="o">-&gt;</span><span class="n">set_upper_bound</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>

    <span class="n">neural_network</span><span class="p">.</span><span class="n">construct_independent_parameters</span><span class="p">();</span>

    <span class="n">IndependentParameters</span><span class="o">*</span> <span class="n">independent_parameters_pointer</span> <span class="o">=</span> <span class="n">neural_network</span><span class="p">.</span><span class="n">get_independent_parameters_pointer</span><span class="p">();</span>

    <span class="n">independent_parameters_pointer</span><span class="o">-&gt;</span><span class="n">set_parameters_number</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">independent_parameters_pointer</span><span class="o">-&gt;</span><span class="n">set_name</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">"effective_activation_energy"</span><span class="p">);</span>

    <span class="n">independent_parameters_pointer</span><span class="o">-&gt;</span><span class="n">set_minimum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">);</span>
    <span class="n">independent_parameters_pointer</span><span class="o">-&gt;</span><span class="n">set_maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">200.0</span><span class="p">);</span>

    <span class="n">independent_parameters_pointer</span><span class="o">-&gt;</span><span class="n">set_lower_bound</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>

    <span class="n">independent_parameters_pointer</span><span class="o">-&gt;</span><span class="n">set_parameter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">150.0</span><span class="p">);</span>

    <span class="n">precipitate_dissolution</span><span class="p">.</span><span class="n">calculate_dependent_variables</span><span class="p">(</span><span class="n">neural_network</span><span class="p">,</span> <span class="n">input_data</span><span class="p">);</span>

    <span class="n">PerformanceFunctional</span> <span class="n">performance_functional</span><span class="p">(</span><span class="o">&amp;</span><span class="n">neural_network</span><span class="p">);</span>

    <span class="n">performance_functional</span><span class="p">.</span><span class="n">construct_objective_term</span><span class="p">(</span><span class="n">PerformanceFunctional</span><span class="o">::</span><span class="n">INVERSE_SUM_SQUARED_ERROR</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">precipitate_dissolution</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">data_set</span><span class="p">);</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">performance_functional</span><span class="p">.</span><span class="n">calculate_gradient</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">TrainingStrategy</span> <span class="n">training_strategy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">performance_functional</span><span class="p">);</span>

    <span class="n">neural_network</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">"../data/AA-7449-T79/NeuralNetworkAA-7449-T79.dat"</span><span class="p">);</span>

    <span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p><img alt="Alt text" src="../images/PrecipitateDissolutionModel.gif" /></p>

<p><a href="data/DataAA-2014-T6.dat">Download data set</a></p>

<p>Mathematical model
<br>
<br>
<br>
Data set
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Neural network
<br>
<br>
<br>
Inputs-outputs information
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Multilayer perceptron
<br>
<br>
<br>
Scaling layer
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Unscaling layer
<br>
<br>
<br>
<br>
<br>
Bounding layer
<br>
<br>
<br>
<br>
<br>
Independent parameters
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Performance functional</p>

<p>Objective term
<br>
<br>
<br>
Training strategy</p>

<p>Save results</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
